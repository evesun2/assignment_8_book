
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chapter 3: Road to the Finals! &#8212; Assignment 8 A Guide to the World Cup</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 4: Ode to Ronaldo" href="chap4.html" />
    <link rel="prev" title="Chapter 2: Automating the betting system" href="chap2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Assignment 8 A Guide to the World Cup</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="chap1.html">
   Chapter 1: Guide to the World Cup
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Part 1
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="chap2.html">
   Chapter 2: Automating the betting system
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Chapter 3: Road to the Finals!
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Part 2
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="chap4.html">
   Chapter 4: Ode to Ronaldo
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/chap3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchap3.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chap3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-used-for-calculations">
   Data used for calculations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculating-historical-success-rate">
   Calculating historical success rate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#predictions-for-quarter-finals">
   2022 Predictions for Quarter Finals
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#apperance-rate-to-determine-a-winner">
     Apperance rate to determine a winner
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Chapter 3: Road to the Finals!</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-used-for-calculations">
   Data used for calculations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculating-historical-success-rate">
   Calculating historical success rate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#predictions-for-quarter-finals">
   2022 Predictions for Quarter Finals
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#apperance-rate-to-determine-a-winner">
     Apperance rate to determine a winner
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="chapter-3-road-to-the-finals">
<h1>Chapter 3: Road to the Finals!<a class="headerlink" href="#chapter-3-road-to-the-finals" title="Permalink to this headline">¶</a></h1>
<p>The finals for the World Cup this year is on Dec 18. With the finals quickly approaching, people are placing their bets on who might take home the trophy. But you don’t want to bet blindly so here we’re going to develop a method to calculate the odds of a country winning dependent on which round of the tournament they are in and their historical record.</p>
<div class="section" id="data-used-for-calculations">
<h2>Data used for calculations<a class="headerlink" href="#data-used-for-calculations" title="Permalink to this headline">¶</a></h2>
<p>We are going to use data provided here: <a class="reference external" href="https://github.com/jfjelstul/worldcup">https://github.com/jfjelstul/worldcup</a></p>
<p>The data that we are going to use specifically is the matches.csv dataset which contains information about all the World Cup matches played since 1930 including information on which stage of the tournament and who won <span id="id1">[<a class="reference internal" href="#id6">Fje22</a>]</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Import pandas and altair</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Import matches.csv data from worldcup database on github</span>
<span class="n">matches</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/jfjelstul/worldcup/master/data-csv/matches.csv&#39;</span><span class="p">)</span>
<span class="n">matches</span> <span class="o">=</span> <span class="n">matches</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;key_id&#39;</span><span class="p">,</span> <span class="s1">&#39;tournament_id&#39;</span><span class="p">,</span> <span class="s1">&#39;match_id&#39;</span><span class="p">,</span> <span class="s1">&#39;match_name&#39;</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">,</span><span class="s1">&#39;group_stage&#39;</span><span class="p">,</span> <span class="s1">&#39;knockout_stage&#39;</span><span class="p">,</span> <span class="s1">&#39;replayed&#39;</span><span class="p">,</span><span class="s1">&#39;replay&#39;</span><span class="p">,</span> <span class="s1">&#39;match_date&#39;</span><span class="p">,</span> <span class="s1">&#39;match_time&#39;</span><span class="p">,</span> <span class="s1">&#39;stadium_id&#39;</span><span class="p">,</span> <span class="s1">&#39;stadium_name&#39;</span><span class="p">,</span> <span class="s1">&#39;city_name&#39;</span><span class="p">,</span> <span class="s1">&#39;country_name&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_id&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_code&#39;</span><span class="p">,</span> <span class="s1">&#39;away_team_id&#39;</span><span class="p">,</span><span class="s1">&#39;away_team_code&#39;</span><span class="p">,</span> <span class="s1">&#39;score&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_score_margin&#39;</span><span class="p">,</span> <span class="s1">&#39;away_team_score_margin&#39;</span><span class="p">,</span> <span class="s1">&#39;extra_time&#39;</span><span class="p">,</span> <span class="s1">&#39;penalty_shootout&#39;</span><span class="p">,</span> <span class="s1">&#39;score_penalties&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_score_penalties&#39;</span><span class="p">,</span><span class="s1">&#39;away_team_score_penalties&#39;</span><span class="p">,</span> <span class="s1">&#39;draw&#39;</span><span class="p">])</span>
<span class="n">matches</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>tournament_name</th>
      <th>stage_name</th>
      <th>home_team_name</th>
      <th>away_team_name</th>
      <th>home_team_score</th>
      <th>away_team_score</th>
      <th>result</th>
      <th>home_team_win</th>
      <th>away_team_win</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>France</td>
      <td>Mexico</td>
      <td>4</td>
      <td>1</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>United States</td>
      <td>Belgium</td>
      <td>3</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Yugoslavia</td>
      <td>Brazil</td>
      <td>2</td>
      <td>1</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Romania</td>
      <td>Peru</td>
      <td>3</td>
      <td>1</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Argentina</td>
      <td>France</td>
      <td>1</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Chile</td>
      <td>Mexico</td>
      <td>3</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Yugoslavia</td>
      <td>Bolivia</td>
      <td>4</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>United States</td>
      <td>Paraguay</td>
      <td>3</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Uruguay</td>
      <td>Peru</td>
      <td>1</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1930 FIFA World Cup</td>
      <td>group stage</td>
      <td>Chile</td>
      <td>France</td>
      <td>1</td>
      <td>0</td>
      <td>home team win</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="calculating-historical-success-rate">
<h2>Calculating historical success rate<a class="headerlink" href="#calculating-historical-success-rate" title="Permalink to this headline">¶</a></h2>
<p>We want to use the historical record available in the matches dataset to calculate the likelihood of winning depending on which stage of the tournament the country is playing in.</p>
<p>Let’s try to figure how what the chances are that Argentina (<a class="reference internal" href="#argentina"><span class="std std-numref">Fig. 5</span></a>) wins one of their group stage matches based on their historical record.</p>
<div class="figure align-default" id="argentina">
<a class="reference internal image-reference" href="https://upload.wikimedia.org/wikipedia/commons/1/1a/Flag_of_Argentina.svg"><img alt="https://upload.wikimedia.org/wikipedia/commons/1/1a/Flag_of_Argentina.svg" height="150px" src="https://upload.wikimedia.org/wikipedia/commons/1/1a/Flag_of_Argentina.svg" /></a>
<p class="caption"><span class="caption-number">Fig. 5 </span><span class="caption-text">The flag of Argentina.</span><a class="headerlink" href="#argentina" title="Permalink to this image">¶</a></p>
</div>
<p>To calculate this we will need to using the following formula:</p>
<div class="math notranslate nohighlight" id="hist-win">
<span id="equation-hist-win"></span><span class="eqno">(7)<a class="headerlink" href="#hist-win" title="Permalink to this equation">¶</a></span>\[WinOdds = \frac {AwayWins + HomeWins}{TotalGames}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Divide the data into only group stage matches based on Argentina as the home or away team</span>
<span class="n">group_only</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="n">matches</span><span class="p">[</span><span class="s1">&#39;stage_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;group stage&#39;</span><span class="p">]</span>
<span class="n">arg_home</span> <span class="o">=</span> <span class="n">group_only</span><span class="p">[</span><span class="n">group_only</span><span class="p">[</span><span class="s1">&#39;home_team_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Argentina&#39;</span><span class="p">]</span>
<span class="n">arg_away</span> <span class="o">=</span> <span class="n">group_only</span><span class="p">[</span><span class="n">group_only</span><span class="p">[</span><span class="s1">&#39;away_team_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Argentina&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>After subdividing the dataset, we can use <a class="reference internal" href="#equation-hist-win">()</a> using the following codes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">total_home</span> <span class="o">=</span> <span class="n">arg_home</span><span class="p">[</span><span class="s1">&#39;home_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">total_away</span> <span class="o">=</span> <span class="n">arg_away</span><span class="p">[</span><span class="s1">&#39;away_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">total_arg_win</span> <span class="o">=</span> <span class="n">total_home</span> <span class="o">+</span> <span class="n">total_away</span>
<span class="n">arg_win_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_arg_win</span><span class="o">/</span><span class="p">(</span><span class="n">arg_home</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">arg_away</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="mi">100</span>
<span class="n">arg_win_rate</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_home</span> <span class="o">=</span> <span class="n">arg_home</span><span class="p">[</span><span class="s1">&#39;home_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">total_away</span> <span class="o">=</span> <span class="n">arg_away</span><span class="p">[</span><span class="s1">&#39;away_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">total_arg_win</span> <span class="o">=</span> <span class="n">total_home</span> <span class="o">+</span> <span class="n">total_away</span>
<span class="n">arg_win_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_arg_win</span><span class="o">/</span><span class="p">(</span><span class="n">arg_home</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">arg_away</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="mi">100</span>
<span class="n">arg_win_rate</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>62.5
</pre></div>
</div>
</div>
</div>
<p>Let’s create a function that automates the process by taking in a which stage of the tournament we are betting on and which country. The code for the function should:</p>
<ol class="simple">
<li><p>parse the dataset down to only the stage of interest and only the country of interest</p></li>
<li><p>calculate the total wins from the country in that stage</p></li>
<li><p>based on the total games played, determine the chances of winning</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">chance_win</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="n">stage</span><span class="p">):</span>
    <span class="n">stage_only</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="n">matches</span><span class="p">[</span><span class="s1">&#39;stage_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">stage</span><span class="p">]</span>
    <span class="n">home</span> <span class="o">=</span> <span class="n">group_only</span><span class="p">[</span><span class="n">group_only</span><span class="p">[</span><span class="s1">&#39;home_team_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">country</span><span class="p">]</span>
    <span class="n">away</span> <span class="o">=</span> <span class="n">group_only</span><span class="p">[</span><span class="n">group_only</span><span class="p">[</span><span class="s1">&#39;away_team_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">country</span><span class="p">]</span>
    <span class="n">win_rate</span> <span class="o">=</span> <span class="p">((</span><span class="n">home</span><span class="p">[</span><span class="s1">&#39;home_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">away</span><span class="p">[</span><span class="s1">&#39;away_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">/</span><span class="p">(</span><span class="n">arg_home</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">arg_away</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="mi">100</span>
    <span class="k">return</span> <span class="n">win_rate</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">chance_win</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="n">stage</span><span class="p">):</span>
    <span class="n">stage_only</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="n">matches</span><span class="p">[</span><span class="s1">&#39;stage_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">stage</span><span class="p">]</span>
    <span class="n">home</span> <span class="o">=</span> <span class="n">group_only</span><span class="p">[</span><span class="n">group_only</span><span class="p">[</span><span class="s1">&#39;home_team_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">country</span><span class="p">]</span>
    <span class="n">away</span> <span class="o">=</span> <span class="n">group_only</span><span class="p">[</span><span class="n">group_only</span><span class="p">[</span><span class="s1">&#39;away_team_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">country</span><span class="p">]</span>
    <span class="n">win_rate</span> <span class="o">=</span> <span class="p">((</span><span class="n">home</span><span class="p">[</span><span class="s1">&#39;home_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">away</span><span class="p">[</span><span class="s1">&#39;away_team_win&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">/</span><span class="p">(</span><span class="n">arg_home</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">arg_away</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">*</span><span class="mi">100</span>
    <span class="k">return</span> <span class="n">win_rate</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Test above function</span>
<span class="n">chance_win</span><span class="p">(</span><span class="s1">&#39;Argentina&#39;</span><span class="p">,</span><span class="s1">&#39;group stage&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>62.5
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="predictions-for-quarter-finals">
<h2>2022 Predictions for Quarter Finals<a class="headerlink" href="#predictions-for-quarter-finals" title="Permalink to this headline">¶</a></h2>
<p>Using the <code class="docutils literal notranslate"><span class="pre">chance_win</span></code> formula, we can determine the chances that the remaining teams currently have in the quarter finals.</p>
<p>Currently, we have the following teams left:</p>
<div class="figure align-default" id="quarters">
<a class="reference internal image-reference" href="https://pbs.twimg.com/media/FjUrHd-WYAA5_8k?format=jpg&amp;name=900x900"><img alt="https://pbs.twimg.com/media/FjUrHd-WYAA5_8k?format=jpg&amp;name=900x900" src="https://pbs.twimg.com/media/FjUrHd-WYAA5_8k?format=jpg&amp;name=900x900" style="height: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 6 </span><span class="caption-text">Teams remaining the quarter finals of the 2022 World Cup.</span><a class="headerlink" href="#quarters" title="Permalink to this image">¶</a></p>
</div>
<p>Let’s create a table that includes the remaining 8 countries as shown in <a class="reference internal" href="#quarters"><span class="std std-numref">Fig. 6</span></a> and their chances of winning their quarter finals match.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">remaining_teams</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Netherlands&#39;</span><span class="p">,</span> <span class="s1">&#39;Argentina&#39;</span><span class="p">,</span> <span class="s1">&#39;Croatia&#39;</span><span class="p">,</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;England&#39;</span><span class="p">,</span> <span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;Morocco&#39;</span><span class="p">,</span> <span class="s1">&#39;Portugal&#39;</span><span class="p">]</span>

<span class="n">win_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:[],</span><span class="s1">&#39;odds_of_winning&#39;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">teams</span> <span class="ow">in</span> <span class="n">remaining_teams</span><span class="p">:</span>
    <span class="n">win_dict</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">teams</span><span class="p">]</span>
    <span class="n">win_dict</span><span class="p">[</span><span class="s1">&#39;odds_of_winning&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">chance_win</span><span class="p">(</span><span class="n">teams</span><span class="p">,</span><span class="s1">&#39;quarter-finals&#39;</span><span class="p">)]</span>

<span class="n">quar_win_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">win_dict</span><span class="p">)</span>
<span class="n">quar_win_table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>odds_of_winning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Netherlands</td>
      <td>29.166667</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Argentina</td>
      <td>62.500000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Croatia</td>
      <td>14.583333</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Brazil</td>
      <td>81.250000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>England</td>
      <td>41.666667</td>
    </tr>
    <tr>
      <th>5</th>
      <td>France</td>
      <td>33.333333</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Morocco</td>
      <td>4.166667</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Portugal</td>
      <td>22.916667</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#graph the above data</span>
<span class="n">chart3</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">quar_win_table</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
                   <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Country&#39;</span><span class="p">),</span> 
                   <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;odds_of_winning&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Percent chance of winning their quarter finals match&#39;</span><span class="p">)</span>
         <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Odds of remaining countries passing the quarter finals&quot;</span><span class="p">)</span>
<span class="n">chart3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div id="altair-viz-68585e72463c4fa8a43fb2dcf0587483"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-68585e72463c4fa8a43fb2dcf0587483") {
      outputDiv = document.getElementById("altair-viz-68585e72463c4fa8a43fb2dcf0587483");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-a78e3159fccc504857e46459818a5a93"}, "mark": "bar", "encoding": {"x": {"field": "country", "title": "Country", "type": "nominal"}, "y": {"field": "odds_of_winning", "title": "Percent chance of winning their quarter finals match", "type": "quantitative"}}, "height": 300, "title": "Odds of remaining countries passing the quarter finals", "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-a78e3159fccc504857e46459818a5a93": [{"country": "Netherlands", "odds_of_winning": 29.166666666666668}, {"country": "Argentina", "odds_of_winning": 62.5}, {"country": "Croatia", "odds_of_winning": 14.583333333333334}, {"country": "Brazil", "odds_of_winning": 81.25}, {"country": "England", "odds_of_winning": 41.66666666666667}, {"country": "France", "odds_of_winning": 33.33333333333333}, {"country": "Morocco", "odds_of_winning": 4.166666666666666}, {"country": "Portugal", "odds_of_winning": 22.916666666666664}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="section" id="apperance-rate-to-determine-a-winner">
<h3>Apperance rate to determine a winner<a class="headerlink" href="#apperance-rate-to-determine-a-winner" title="Permalink to this headline">¶</a></h3>
<p>We can also determine how often these teams have history been in the semi-finals (ie. passed the quarter finals) by parsing the data based on the semi-finals and which countries have appeared regardless of win or loss at that stage. But this time let’s try to predict who can win it all using the appearance rate method.</p>
<p>Let’s use Argentina as an example again:</p>
<ol class="simple">
<li><p>We need to subset the data by finals</p></li>
<li><p>Count the number of appearances Argentina has made</p></li>
<li><p>Count the total number of tournaments represented in the dataset</p></li>
<li><p>Determine the rate of appearance in the semi-finals using the formula:</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">finals</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="n">matches</span><span class="p">[</span><span class="s1">&#39;stage_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;final&#39;</span><span class="p">]</span>
<span class="n">arg_appearance</span> <span class="o">=</span> <span class="n">finals</span><span class="p">[</span><span class="s1">&#39;home_team_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;Argentina&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">finals</span><span class="p">[</span><span class="s1">&#39;away_team_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;Argentina&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">arg_appearance</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_fifas</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="s1">&#39;tournament_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Rate of appearances in the semi-finals for Argentina as per the above formula <code class="xref eq docutils literal notranslate"><span class="pre">appear_rate</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arg_final_appearance</span> <span class="o">=</span> <span class="p">(</span><span class="n">arg_appearance</span><span class="o">/</span><span class="n">total_fifas</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
<span class="n">arg_final_appearance</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>23.809523809523807
</pre></div>
</div>
</div>
</div>
<p>As per above, we can create a function to automate this and graph the rate of finals appearances by the remaining 8 countries in the 2022 World Cup.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">rate_appear</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="n">stage</span><span class="p">):</span>
    <span class="n">stage_div</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="n">matches</span><span class="p">[</span><span class="s1">&#39;stage_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">stage</span><span class="p">]</span>
    <span class="n">appears</span> <span class="o">=</span> <span class="n">stage_div</span><span class="p">[</span><span class="s1">&#39;home_team_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">country</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">stage_div</span><span class="p">[</span><span class="s1">&#39;away_team_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">country</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="s1">&#39;tournament_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="n">appearance_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">appears</span><span class="o">/</span><span class="n">total</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
    <span class="k">return</span> <span class="n">appearance_rate</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Test the function using Argentina</span>
<span class="n">rate_appear</span><span class="p">(</span><span class="s1">&#39;Argentina&#39;</span><span class="p">,</span><span class="s1">&#39;final&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>23.809523809523807
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">remaining_teams</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Netherlands&#39;</span><span class="p">,</span> <span class="s1">&#39;Argentina&#39;</span><span class="p">,</span> <span class="s1">&#39;Croatia&#39;</span><span class="p">,</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;England&#39;</span><span class="p">,</span> <span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;Morocco&#39;</span><span class="p">,</span> <span class="s1">&#39;Portugal&#39;</span><span class="p">]</span>

<span class="n">appear_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;country&#39;</span><span class="p">:[],</span><span class="s1">&#39;appearance_rate&#39;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">teams</span> <span class="ow">in</span> <span class="n">remaining_teams</span><span class="p">:</span>
    <span class="n">appear_dict</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">teams</span><span class="p">]</span>
    <span class="n">appear_dict</span><span class="p">[</span><span class="s1">&#39;appearance_rate&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">rate_appear</span><span class="p">(</span><span class="n">teams</span><span class="p">,</span><span class="s1">&#39;final&#39;</span><span class="p">)]</span>

<span class="n">appear_rate_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">appear_dict</span><span class="p">)</span>
<span class="n">appear_rate_table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>appearance_rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Netherlands</td>
      <td>14.285714</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Argentina</td>
      <td>23.809524</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Croatia</td>
      <td>4.761905</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Brazil</td>
      <td>28.571429</td>
    </tr>
    <tr>
      <th>4</th>
      <td>England</td>
      <td>4.761905</td>
    </tr>
    <tr>
      <th>5</th>
      <td>France</td>
      <td>14.285714</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Morocco</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Portugal</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#graph the above data</span>
<span class="n">chart4</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">appear_rate_table</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
                   <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Country&#39;</span><span class="p">),</span> 
                   <span class="n">y</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;appearance_rate&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Rate of appearance in the semi-finals&#39;</span><span class="p">)</span>
         <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Historical rate of appearance in the semi-finals since 1930&quot;</span><span class="p">)</span>
<span class="n">chart4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div id="altair-viz-b8bbb95c21de4c44b2c946695fb0c300"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b8bbb95c21de4c44b2c946695fb0c300") {
      outputDiv = document.getElementById("altair-viz-b8bbb95c21de4c44b2c946695fb0c300");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-19733dea36b04d17f88dcf2bf49dbad7"}, "mark": "bar", "encoding": {"x": {"field": "country", "title": "Country", "type": "nominal"}, "y": {"field": "appearance_rate", "title": "Rate of appearance in the semi-finals", "type": "quantitative"}}, "height": 300, "title": "Historical rate of appearance in the semi-finals since 1930", "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-19733dea36b04d17f88dcf2bf49dbad7": [{"country": "Netherlands", "appearance_rate": 14.285714285714285}, {"country": "Argentina", "appearance_rate": 23.809523809523807}, {"country": "Croatia", "appearance_rate": 4.761904761904762}, {"country": "Brazil", "appearance_rate": 28.57142857142857}, {"country": "England", "appearance_rate": 4.761904761904762}, {"country": "France", "appearance_rate": 14.285714285714285}, {"country": "Morocco", "appearance_rate": 0.0}, {"country": "Portugal", "appearance_rate": 0.0}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>According to the data, Brazil appears to have the highest chance of passing the quarter finals and making it to the finals!</p>
<p id="id2"><dl class="citation">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id1">Fje22</a></span></dt>
<dd><p>Josh Fjelstul. The Fjelstul World Cup Database. December 2022. original-date: 2022-07-10T20:05:07Z. URL: <a class="reference external" href="https://github.com/jfjelstul/worldcup">https://github.com/jfjelstul/worldcup</a> (visited on 2022-12-09).</p>
</dd>
</dl>
</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="chap2.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Chapter 2: Automating the betting system</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="chap4.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 4: Ode to Ronaldo</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Evelyn Sun<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>